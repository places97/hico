<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.go.hico.board.post.mapper.PostMapper">

	<select id="getPostListByBoardId" parameterType="long"
		resultType="kr.go.hico.board.post.vo.PostVo">
		SELECT
				p.post_id
			, p.board_id
			, p.title
			, p.content
			, p.view_cnt AS view_count
			, p.created_at
			, p.updated_at
			, p.user_id  AS writer_id
			, u.user_nm  AS writer_name
			, p.del_yn
			FROM
				post p
					LEFT JOIN users u
					ON p.user_id = u.user_id
		 WHERE
			 p.board_id = #{boardId}
		 ORDER BY
			 p.created_at DESC
	</select>
	<select id="getPostById" parameterType="kr.go.hico.board.post.vo.PostRequestVo"
		resultType="kr.go.hico.board.post.vo.PostVo">
		SELECT
				p.post_id
			, p.board_id
			, p.title
			, p.content
			, p.view_cnt AS view_count
			, p.created_at
			, p.updated_at
			, p.user_id  AS writer_id
			, u.user_nm  AS writer_name
			, p.del_yn
			FROM
				post p
					LEFT JOIN users u
					ON p.user_id = u.user_id
		 WHERE
					 p.board_id = #{boardId}
			 AND p.post_id = #{postId}
	</select>
</mapper>